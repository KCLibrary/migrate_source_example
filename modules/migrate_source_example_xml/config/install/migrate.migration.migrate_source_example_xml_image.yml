langcode: en
status: true
id: migrate_source_example_xml_image
label: Image migration from xml file
dependencies:
  module:
    - migrate_source_xml
    - file
source:
  plugin: migration_source_example_xml_image
  urls:
    - source/books.xml
  element_query: /books/media_resources/media
  id_query: @mid
  fields:
    @mid: Image ID
    @filename: Image Filename
  keys:
    - @mid
  source_base_path: source/images
  constants:
    file_scheme: 'public://'
process:
  filename: @@filename
  uri:
    plugin: concat
    delimiter: ''
    source:
      - constants/file_scheme
      - filename
destination:
  plugin: 'entity:file'
  destination_path_property: uri
  source_path_property: full_path
migration_group: migrate_source_example_xml
